import{jsx as f,jsxs as W}from"https://esm.sh/react/jsx-runtime";import{createRoot as Ut}from"https://esm.sh/react-dom/client";import B,{useEffect as pt,useRef as _t,useState as Dt}from"https://esm.sh/react";import{theme as Rt,Input as zt,Typography as k,notification as Et,Flex as P,ConfigProvider as Mt,Tooltip as lt,Radio as N,Checkbox as ft,Table as At,Spin as Bt,Tag as H,Button as q,Alert as Nt}from"https://esm.sh/antd?standalone";import{GithubOutlined as Ht,YoutubeOutlined as qt,TwitterOutlined as Jt,SunOutlined as Kt,MoonOutlined as Zt,DownloadOutlined as G}from"https://esm.sh/@ant-design/icons?standalone";import Gt from"https://esm.sh/fuse.js?standalone";import{File as A,decode as E,guess as M,encode as X,Fmt as Y}from"https://esm.sh/@easy-install/easy-archive?standalone";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const Xt="ttf,otf,woff,woff2,eot".split(","),Yt="dll,so,dylib".split(",");function mt(t,e){if(!t?.length)return!1;for(const n of e){if(n.length===0)return!t.includes(".");if(t.endsWith(`.${n}`))return!0}return!1}function Q(t,e=Xt){return mt(t.toLocaleLowerCase(),e)}function V(t,e=Yt){return mt(t.toLocaleLowerCase(),e)}function Qt(t){try{const e=new URL(t);if(e.hostname!=="github.com")return;const n=e.pathname.split("/").filter(Boolean);return n.length<2?void 0:{user:n[0],repo:n[1]}}catch{return}}function Vt(t,e,n){const c=new TextDecoder("utf-8"),r=c.decode(t),o="#".repeat(4),s=[o,n.name,o].join(" ");if(r.includes(s))return t;const a=c.decode(e).trim(),h=[r,"",s,a,s,""].join(`
`).trimStart();return new TextEncoder().encode(h)}function rt(t){if(t.length===0)return 0;if(t.length===1)return t[0].length;let e=0;const n=t[0];for(let c=0;c<n.length;c++){const r=n[c];if(t.every(o=>o[c]===r))e++;else break}return e}function ut(t,e,n,c="portable_config"){for(const s of["fonts","script-opts","shaders"])if(e.find(a=>a.path.startsWith(`${s}/`))){const a=e.filter(h=>h.path.startsWith(`${s}/`));e=e.filter(h=>!h.path.startsWith(`${s}/`));for(const h of a)h.path=`${c}/${s}/${h.path.replace(`${s}/`,"")}`,t.push(h)}if(e.find(s=>s.path.startsWith("scripts/"))){const s=e.filter(p=>p.path.startsWith("scripts/"));e=e.filter(p=>!p.path.startsWith("scripts/"));const a=s.map(p=>p.path.split("/")).map(p=>p.slice(1,p.length-1)),h=rt(a),m=`${(h?["scripts",...a[0].slice(0,h)]:["scripts"]).join("/")}/`,u=s.filter(p=>!p.path.replace(m,"").includes("/")&&p.path.endsWith(".lua")),S=s.filter(p=>!p.path.replace(m,"").includes("/")&&p.path.endsWith(".js"));u.length===1?u[0].path=`${n.scriptName||n.name}/main.lua`:S.length===1&&(S[0].path=`${n.scriptName||n.name}/main.js`);for(const p of s){const x=p.path.replace(m,`${n.scriptName||n.name}/`);p.path=`${c}/scripts/${x}`,t.push(p)}}if(e.find(s=>s.path.startsWith("externals/"))){const s=e.filter(a=>a.path.startsWith("externals/"));e=e.filter(a=>!a.path.startsWith("externals/"));for(const a of s)a.path=a.path.replace("externals/",""),t.push(a)}for(const s of["input.conf","mpv.conf"]){const a=e.findIndex(I=>I.path===s);if(a===-1)continue;const h=e.splice(a,1)[0],v=t.findIndex(I=>I.path===`${c}/${s}`);let m;v===-1?m=new A(`${c}/${s}`,new Uint8Array,void 0,!1,BigInt(Date.now())):m=t.splice(v,1)[0];const{path:u,mode:S,isDir:p,lastModified:x,buffer:U}=m,y=Vt(U,h.buffer,n);t.push(new A(u,y,S,p,x))}if(e.find(s=>!s.path.includes("/")&&s.path.endsWith(".conf"))){const s=e.filter(a=>!a.path.includes("/")&&a.path.endsWith(".conf"));e=e.filter(a=>!(!a.path.includes("/")&&a.path.endsWith(".conf")));for(const a of s){const h=e.find(u=>u.path===a.path.replace(".conf",".js")),v=e.find(u=>u.path===a.path.replace(".conf",".lua")),m=h||v?`${c}/script-opts/${a.path}`:a.path;a.path=m,t.push(a)}}if(e.find(s=>!s.path.includes("/")&&Q(s.path))){const s=e.filter(a=>!a.path.includes("/")&&Q(a.path));e=e.filter(a=>!(!a.path.includes("/")&&Q(a.path)));for(const a of s)a.path=`${c}/fonts/${a.path}`,t.push(a)}if(e.find(s=>!s.path.includes("/")&&V(s.path))){const s=e.filter(a=>!a.path.includes("/")&&V(a.path));e=e.filter(a=>!(!a.path.includes("/")&&V(a.path)));for(const a of s)a.path=`${c}/scripts/${a.path}`,t.push(a)}const r=e.filter(s=>!s.path.includes("/")&&s.path.endsWith(".lua")),o=e.filter(s=>!s.path.includes("/")&&s.path.endsWith(".js"));r.length===1?r[0].path="main.lua":o.length===1&&(o[0].path="main.js");for(const s of e)s.path=`${c}/scripts/${n.scriptName||n.name}/${s.path}`,t.push(s)}const Ft=[["thumbfast","mpv-easy-thumbfast"],["autoload","mpv-easy-autoload"],["uosc","mpv-easy","ModernX cyl0","ModernZ","mpv.net"]],yt={uosc:["autoload","mpv-easy-autoload"],"mpv-easy":["mpv-easy-anime4k","mpv-easy-clipboard-play","mpv-easy-copy-time","mpv-easy-cut","mpv-easy-translate","mpv-easy-autoload","mpv-easy-copy-screen","mpv-easy-crop","mpv-easy-thumbfast","mpv-easy-frame-seeker"]};function te(t,e=Ft){for(const r of e){const o=[];for(const s of t)r.includes(s)&&o.push(s);if(o.length>1)return o}const n=new Set,c=new Set(t);for(const r in t){const o=yt[r]||[];for(const s of o)c.has(s)&&(n.add(r),n.add(s))}return Array.from(n)}function F(t){const e=[".ttf",".otf",".woff",".woff2",".eot"],n=t.toLowerCase();return e.some(c=>n.endsWith(c))}function ee(t){const e=t.map(c=>c.path.split("/")).map(c=>c.slice(0,c.length-1)),n=rt(e);if(n&&e.length){const r=`${e[0].slice(0,n).join("/")}/`;for(const o of t)o.path=o.path.replace(r,"")}return t}function ht(t,e){ee(t);const n=[];for(const r of[".github","docs"])t.find(o=>o.path.startsWith(`${r}/`))&&(t=t.filter(o=>!o.path.startsWith(`${r}/`)));for(const r of["fonts","script-opts","shaders"])if(t.find(o=>o.path.startsWith(`${r}/`))){const o=t.filter(s=>s.path.startsWith(`${r}/`));t=t.filter(s=>!s.path.startsWith(`${r}/`));for(const s of o)n.push(s)}if(t.find(r=>r.path.startsWith("scripts/"))){const r=t.filter(u=>u.path.startsWith("scripts/"));t=t.filter(u=>!u.path.startsWith("scripts/"));const o=r.map(u=>u.path.split("/")).map(u=>u.slice(1,u.length-1)),s=rt(o),h=`${(s?["scripts",...o[0].slice(0,s)]:["scripts"]).join("/")}/`,v=r.filter(u=>!u.path.replace(h,"").includes("/")&&u.path.endsWith(".lua")),m=r.filter(u=>!u.path.replace(h,"").includes("/")&&u.path.endsWith(".js"));v.length===1?v[0].path="scripts/main.lua":m.length===1&&(m[0].path="scripts/main.js");for(const u of r){const S=u.path.replace(h,"scripts/");u.path=S,n.push(u)}}if(t.find(r=>r.path.startsWith("externals/"))){const r=t.filter(o=>o.path.startsWith("externals/"));t=t.filter(o=>!o.path.startsWith("externals/"));for(const o of r)n.push(o)}for(const r of["input.conf","mpv.conf"]){const o=t.findIndex(a=>a.path===r);if(o===-1)continue;const s=t.splice(o,1)[0];n.push(s)}if(t.find(r=>!r.path.includes("/")&&r.path.endsWith(".conf"))){const r=t.filter(o=>!o.path.includes("/")&&o.path.endsWith(".conf"));t=t.filter(o=>!(!o.path.includes("/")&&o.path.endsWith(".conf")));for(const o of r)o.path=`script-opts/${o.path}`,n.push(o)}if(t.find(r=>!r.path.includes("/")&&F(r.path))){const r=t.filter(o=>!o.path.includes("/")&&F(o.path));t=t.filter(o=>!(!o.path.includes("/")&&F(o.path)));for(const o of r)o.path=`fonts/${o.path}`,n.push(o)}if(!t.find(r=>r.path==="scripts/main.lua"||r.path==="scripts/main.js")){const r=t.filter(s=>!s.path.includes("/")&&s.path.endsWith(".lua")),o=t.filter(s=>!s.path.includes("/")&&s.path.endsWith(".js"));if(r.length===1){const s=t.indexOf(r[0]);t.splice(s,1),r[0].path="scripts/main.lua",n.push(r[0])}else if(o.length===1){const s=t.indexOf(o[0]);t.splice(s,1),o[0].path="scripts/main.js",n.push(o[0])}}t.filter(r=>r.path.endsWith(".js")||r.path.endsWith(".lua")).length&&console.log("tryfix maybe failed",e,t.map(r=>r.path).join(" "));for(const r of t)n.push(r);return n}var ne=function(t){pt(t,[])},oe=function(t){ne(function(){t()})};const dt=t=>{let e;const n=new Set,c=(v,m)=>{const u=typeof v=="function"?v(e):v;if(!Object.is(u,e)){const S=e;e=m??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(p=>p(e,S))}},r=()=>e,a={setState:c,getState:r,getInitialState:()=>h,subscribe:v=>(n.add(v),()=>n.delete(v))},h=e=t(c,r,a);return a},re=(t=>t?dt(t):dt),se=t=>t;function ae(t,e=se){const n=B.useSyncExternalStore(t.subscribe,B.useCallback(()=>e(t.getState()),[t,e]),B.useCallback(()=>e(t.getInitialState()),[t,e]));return B.useDebugValue(n),n}const ie=t=>{const e=re(t),n=c=>ae(e,c);return Object.assign(n,e),n},ce=(t=>ie);function gt(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var o;const s=h=>h===null?null:JSON.parse(h,void 0),a=(o=n.getItem(r))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(r,o)=>n.setItem(r,JSON.stringify(o,void 0)),removeItem:r=>n.removeItem(r)}}const nt=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(c){return nt(c)(n)},catch(c){return this}}}catch(n){return{then(c){return this},catch(c){return nt(c)(n)}}}},le=(t,e)=>(n,c,r)=>{let o={storage:gt(()=>window.localStorage),partialize:y=>y,version:0,merge:(y,I)=>({...I,...y}),...e},s=!1,a=0;const h=new Set,v=new Set;let m=o.storage;if(!m)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...y)},c,r);const u=()=>{const y=o.partialize({...c()});return m.setItem(o.name,{state:y,version:o.version})},S=r.setState;r.setState=(y,I)=>(S(y,I),u());const p=t((...y)=>(n(...y),u()),c,r);r.getInitialState=()=>p;let x;const U=()=>{var y,I;if(!m)return;const R=++a;s=!1,h.forEach(b=>{var L;return b((L=c())!=null?L:p)});const O=((I=o.onRehydrateStorage)==null?void 0:I.call(o,(y=c())!=null?y:p))||void 0;return nt(m.getItem.bind(m))(o.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==o.version){if(o.migrate){const L=o.migrate(b.state,b.version);return L instanceof Promise?L.then(T=>[!0,T]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var L;if(R!==a)return;const[T,st]=b;if(x=o.merge(st,(L=c())!=null?L:p),n(x,!0),T)return u()}).then(()=>{R===a&&(O?.(x,void 0),x=c(),s=!0,v.forEach(b=>b(x)))}).catch(b=>{R===a&&O?.(void 0,b)})};return r.persist={setOptions:y=>{o={...o,...y},y.storage&&(m=y.storage)},clearStorage:()=>{m?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>U(),hasHydrated:()=>s,onHydrate:y=>(h.add(y),()=>{h.delete(y)}),onFinishHydration:y=>(v.add(y),()=>{v.delete(y)})},o.skipHydration||U(),x||p},fe=le,vt="https://cdn.jsdelivr.net";async function ue(t){const e=await fetch(t).then(n=>n.arrayBuffer());return new Uint8Array(e)}async function he(t){const e=de(t);if(!e)return[];const n=/<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,c=[];for(const r of Array.from(e.matchAll(n),([,o,s])=>{const a=o.endsWith("/");return{path:o.split("/").slice(4).join("/"),url:vt+o,name:s,isDir:a}}))r.isDir||(r.buffer=await ue(r.url)),r.name!=="..."&&c.push(r);return c}function de(t){const e=/<table[^>]*>([\s\S]*?)<\/table>/i,n=t.match(e);return n?n[1].trim():null}async function wt(t,e,n){const c=await fetch(n).then(s=>s.text()),r=await he(c),o=[];for(const s of r)if(s.isDir){const a=n+s.path,h=await wt(t,e,a);for(const v of h)o.push(v)}else o.push(s);return o}function ot(t,e){const n=vt+`/gh/${t}/${e}/`;return wt(t,e,n)}const pe=["mpv","mpv-v3","mpv.net"],bt={data:{},tableData:[],spinning:!1,selectedRowKeys:[],externalList:[],ui:"osc",platform:"mpv-v3",repos:[]},z=[{name:"osc",repo:"https://github.com/mpv-player/mpv",deps:["autoload","thumbfast"],requires:[]},{name:"uosc",repo:"https://github.com/tomasklaen/uosc",deps:["thumbfast"],requires:["uosc"]},{name:"mpv-easy",repo:"https://github.com/mpv-easy/mpv-easy",deps:[],requires:["mpv-easy"]},{name:"modernx",repo:"https://github.com/cyl0/ModernX",deps:["thumbfast","autoload"],requires:["ModernX cyl0"]},{name:"modernz",repo:"https://github.com/Samillion/ModernZ",deps:["thumbfast","autoload"],requires:["ModernZ"]}],me=["ffmpeg","yt-dlp","play-with"];function J(t,e){const n=new Blob([new Uint8Array(e)],{type:"application/octet-stream"}),c=URL.createObjectURL(n),r=document.createElement("a"),o=t.split("/").at(-1)??t;r.download=o,r.href=c,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(c)}function ye(t,e,n,c){return`https://raw.githubusercontent.com/${t}/${e}/${n}/${c}`}function C(t){return ye("ahaoboy","mpv-easy-cdn","main",t)}function ge(){return C("mpv-easy-play-with-windows.zip")}function ve(){return C("yt-dlp.zip")}function we(){return C("ffmpeg-windows.tar.xz")}async function D(t){return fetch(t).then(e=>e.arrayBuffer()).then(e=>new Uint8Array(e))}function St(t){return C(`${t}.zip`)}async function be(t){if(t.repo)return(await ot(t.repo.user,t.repo.repo)).filter(s=>!s.isDir).map(({path:s,buffer:a})=>new A(s,a,void 0,!1,null));const{download:e}=t;if(![".js",".lua",".zip"].some(o=>e.endsWith(o)))return console.log("not support script: ",t),[];const n=St(t.name),c=await D(n);return E(M(n),c).filter(o=>!o.isDir)}async function Se(t){let e=C("mpv-windows.tar.xz");t==="mpv.net"&&(e=C("mpv.net.tar.xz"));const n=await D(e);return E(M(e),n)||[]}const{defaultAlgorithm:xe,darkAlgorithm:$e}=Rt,{Search:Ie}=zt,{Title:Le,Link:ke}=k,je={getItem:t=>{const n=new URLSearchParams(location.hash.slice(1)).get(t)??"";return JSON.parse(n)},setItem:(t,e)=>{const n=new URLSearchParams(location.hash.slice(1));n.set(t,JSON.stringify(e)),location.hash=n.toString()},removeItem:t=>{const e=new URLSearchParams(location.hash.slice(1));e.delete(t),location.hash=e.toString()}},tt=150,et=150,We=250,Pe=ce()(fe((t,e)=>({...bt,setData:n=>t({...e(),data:n}),setTableData:n=>t({...e(),tableData:n}),setSpinning:n=>t({...e(),spinning:n}),setSelectedKeys:n=>t({...e(),selectedRowKeys:n}),setExternalList:n=>t({...e(),externalList:n}),setUI:n=>t({...e(),ui:n}),setPlatform:n=>t({...e(),platform:n}),setState:n=>{t({...e(),...n})},setRepos:n=>t({...e(),repos:n})}),{name:"mpv-build",storage:gt(()=>je),version:void 0,partialize:t=>Object.fromEntries(Object.entries(t).filter(([e])=>!["data","tableData","spinning"].includes(e)))}));function Oe(){const t=Pe(),e=_t(null),{data:n,tableData:c,spinning:r,selectedRowKeys:o,externalList:s,ui:a,setData:h,setTableData:v,setSpinning:m,setUI:u,setSelectedKeys:S,setExternalList:p,platform:x,setPlatform:U,setState:y,repos:I,setRepos:R}=t,O=a==="mpv-easy"?"mpv-easy":`mpv-${a}`,[b,L]=Dt(window.matchMedia("(prefers-color-scheme: dark)").matches),T=z.find(i=>i.name===a)?.requires||[],[st,xt]=Et.useNotification(),$t=()=>{y({...bt,data:n,tableData:c})},It=[...o,...z.find(i=>i.name===a)?.requires||[]],at=async i=>{for(const l of It){const g=n[l];if(g.repo){const{user:w,repo:d}=g.repo,j=(await ot(w,d)).filter(Z=>!Z.isDir).map(({path:Z,buffer:Ct})=>new A(Z,Ct,void 0,!1,null)),_=ht(j,g),K=`${w}-${d}`;ut(i,_,n[K])}else{const w=await be(n[l]),d=ht(w,g);ut(i,d,n[l])}}},Lt=async()=>{const i=[];await at(i);for(const g of i)g.path=g.path.replace("portable_config/","");const l=X(Y.Zip,i);if(!l){console.log("zip file error");return}return l},kt=async()=>{const i=await Se(x);if(s.includes("ffmpeg")){const g=we(),w=await D(g),d=E(M(g),w);for(const $ of d)i.push($)}if(s.includes("yt-dlp")){const g=ve(),w=await D(g),d=E(M(g),w);for(const $ of d)i.push($)}if(s.includes("play-with")){const g=ge(),w=await D(g),d=E(M(g),w);for(const $ of d)i.push($)}await at(i);const l=X(Y.Zip,i);if(!l){console.log("zip file error");return}return l},jt=async()=>{m(!0),await new Promise(l=>setTimeout(l));const i=await kt();m(!1),i&&J(`${O}.zip`,i)},Wt=async()=>{m(!0),await new Promise(l=>setTimeout(l));const i=await Lt();m(!1),i&&J("portable_config.zip",i)},it=async()=>{const i=C("scripts-full.json"),l=await fetch(i).then(d=>d.text()).then(d=>JSON.parse(d));for(const d in l)l[d].key=d;for(const{user:d,repo:$}of I){const j=`${d}-${$}`,_=`https://github.com/${d}/${$}`,K={key:j,name:j,download:j,author:d,description:_,homepage:_,repo:{user:d,repo:$}};l[j]=K}h(l);const g=o.map(d=>l[d]),w=Object.values(l).sort(()=>.5-Math.random()).filter(d=>!o.includes(d.name));v([...g,...w]),e.current=new Gt(Object.values(l),{keys:["name"]})};oe(it),pt(()=>{it()},[I]);const Pt=[{title:"name",dataIndex:"name",key:"key",render:(i,l)=>f(ke,{href:l.homepage,target:"_blank",rel:"noreferrer",children:l.name}),width:We},{title:"description",dataIndex:"description",key:"key"},{title:"author",dataIndex:"author",key:"url"},{title:"download",dataIndex:"download",key:"url",render:(i,l)=>f(q,{icon:f(G,{}),onClick:async()=>{if(l.repo){const d=(await ot(l.repo.user,l.repo.repo)).filter(j=>!j.isDir).map(({path:j,buffer:_})=>new A(j,_,void 0,!1,null)),$=X(Y.Zip,d);$&&J(`${l.repo.repo}.zip`,$);return}const g=await D(St(l.name));J(`${l.name}.zip`,g)}},l.download)}],Ot=(i,l,g)=>{const w=Qt(i);if(w){S([...new Set([...o,`${w.user}-${w.repo}`])]),R([...new Set([...I,w])]);return}const d=e.current?.search(i);d?.length&&v(d.map($=>$.item))};if(!Object.keys(n).length)return f(P,{className:"main",vertical:!0,gap:"middle",justify:"center",align:"center",children:f(k,{children:f(Le,{level:3,children:"Loading..."})})});const ct=te([...o,...z.find(i=>i.name===a)?.requires||[]]),Tt=yt[a]||[];return W(Mt,{theme:{algorithm:b?$e:xe},children:[xt,W(P,{className:["main",b?"main-dark":"main-light"].join(" "),vertical:!0,gap:"middle",justify:"center",align:"center",children:[W(P,{gap:"middle",justify:"center",align:"center",style:{position:"absolute",top:"1rem",right:"1rem"},children:[f(k.Link,{href:"https://github.com/mpv-easy/mpv-easy",target:"_blank",children:f(Ht,{})}),f(k.Link,{href:"https://www.youtube.com/@mpveasy",target:"_blank",children:f(qt,{})}),f(k.Link,{href:"https://x.com/mpv_easy",target:"_blank",children:f(Jt,{})}),b?f(k.Link,{onClick:()=>L(!1),children:f(Kt,{})}):f(k.Link,{onClick:()=>L(!0),children:f(Zt,{})})]}),W(P,{gap:"middle",vertical:!0,align:"start",children:[W(P,{gap:"middle",justify:"center",align:"center",children:[f(k.Title,{level:5,style:{margin:0,width:tt},children:f(lt,{title:"mpv-v3 is for newer CPUs (usually after 2005). If it doesn't run, please use mpv",children:"Platform:"})}),f(N.Group,{value:x,onChange:i=>{U(i.target.value)},children:pe.map(i=>f(lt,{placement:"topLeft",title:i==="mpv"?"Typically, you should use mpv-v3 unless it fails to run or you're using an older CPU (manufactured around 2015 or earlier).":"",children:f(N,{value:i,style:{width:et},children:i},i)},i))})]}),W(P,{gap:"middle",justify:"center",align:"center",children:[f(k.Title,{level:5,style:{margin:0,width:tt},children:"UI:"}),f(N.Group,{onChange:i=>{u(i.target.value);const l=z.find(g=>g.name===i.target.value)?.deps||[];S([...l])},value:a,children:z.map(i=>f(N,{value:i.name,style:{width:et},children:f(k.Link,{href:i.repo,target:"_blank",children:i.name})},i.name))})]}),W(P,{gap:"middle",justify:"center",align:"center",children:[f(k.Title,{level:5,style:{margin:0,width:tt},children:"External:"}),f(ft.Group,{value:s,onChange:i=>{p(i)},children:me.map(i=>f(ft,{value:i,style:{width:et},children:i},i))})]})]}),f(Ie,{placeholder:"input script name or https://github.com/<user>/<repo>",onSearch:Ot,enterButton:!0}),f(At,{rowSelection:{hideSelectAll:!0,type:"checkbox",onSelect:(i,l)=>{S(l?[...o,i.name]:[...o].filter(g=>g!==i.name))},getCheckboxProps:i=>({disabled:T.includes(i.name)||Tt.includes(i.name),name:i.name}),selectedRowKeys:[...o,...T]},className:"table",columns:Pt,dataSource:c}),f(Bt,{spinning:r,fullscreen:!0}),W(P,{children:[f(H,{color:"processing",children:x},x),T.map((i,l)=>n[i]&&f(H,{color:"success",children:n[i]?.name},n[i]?.key+l)),s.map(i=>f(H,{color:"success",children:i},i)),o.map((i,l)=>f(H,{closable:!0,color:"success",onClose:g=>{const w=o.indexOf(n[i]?.key);if(w!==-1){const d=[...o];d.splice(w,1),S(d)}g.preventDefault()},children:n[i]?.name},n[i]?.key+l))]}),W(P,{gap:"middle",children:[f(q,{color:"danger",size:"large",variant:"solid",onClick:$t,children:"Reset"}),W(q,{type:"primary",icon:f(G,{}),size:"large",onClick:jt,children:[O,".zip"]}),f(q,{type:"primary",icon:f(G,{}),size:"large",onClick:Wt,children:"portable_config.zip"})]}),!!ct.length&&f(Nt,{description:`conflict: ${ct.join(" ")}`,type:"error"})]})]})}Ut(document.getElementById("root")).render(f(Oe,{}));
