import{jsxs as S,jsx as l}from"https://esm.sh/react/jsx-runtime";import{createRoot as te}from"https://esm.sh/react-dom/client";import q,{useRef as ee,useState as J,useMemo as ne,useEffect as wt}from"https://esm.sh/react";import{createTheme as oe,ThemeProvider as bt,CssBaseline as xt,Box as St,Typography as K,Stack as T,Link as O,IconButton as tt,Tooltip as It,RadioGroup as $t,FormControlLabel as et,Radio as Pt,FormGroup as ae,Checkbox as Wt,TextField as re,InputAdornment as se,TableContainer as ie,Paper as ce,Table as le,TableHead as fe,TableRow as jt,TableCell as j,TableBody as he,TablePagination as ue,Backdrop as de,CircularProgress as pe,Chip as Z,Button as nt,Alert as me}from"https://esm.sh/@mui/material?standalone";import{GitHub as ge,YouTube as ye,X as ve,LightMode as we,DarkMode as be,Search as xe,Download as ot}from"https://esm.sh/@mui/icons-material?standalone";import Se from"https://esm.sh/fuse.js?standalone";import{File as M,decode as B,guess as E,encode as at,Fmt as rt}from"https://esm.sh/@easy-install/easy-archive?standalone";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const Ie="ttf,otf,woff,woff2,eot".split(","),$e="dll,so,dylib".split(",");function Dt(t,e){if(!t?.length)return!1;for(const n of e){if(n.length===0)return!t.includes(".");if(t.endsWith(`.${n}`))return!0}return!1}function st(t,e=Ie){return Dt(t.toLocaleLowerCase(),e)}function it(t,e=$e){return Dt(t.toLocaleLowerCase(),e)}function Pe(t){try{const e=new URL(t);if(e.hostname!=="github.com")return;const n=e.pathname.split("/").filter(Boolean);return n.length<2?void 0:{user:n[0],repo:n[1]}}catch{return}}function We(t,e,n){const c=new TextDecoder("utf-8"),a=c.decode(t),o="#".repeat(4),r=[o,n.name,o].join(" ");if(a.includes(r))return t;const i=c.decode(e).trim(),u=[a,"",r,i,r,""].join(`
`).trimStart();return new TextEncoder().encode(u)}function dt(t){if(t.length===0)return 0;if(t.length===1)return t[0].length;let e=0;const n=t[0];for(let c=0;c<n.length;c++){const a=n[c];if(t.every(o=>o[c]===a))e++;else break}return e}function kt(t,e,n,c="portable_config"){for(const r of["fonts","script-opts","shaders"])if(e.find(i=>i.path.startsWith(`${r}/`))){const i=e.filter(u=>u.path.startsWith(`${r}/`));e=e.filter(u=>!u.path.startsWith(`${r}/`));for(const u of i)u.path=`${c}/${r}/${u.path.replace(`${r}/`,"")}`,t.push(u)}if(e.find(r=>r.path.startsWith("scripts/"))){const r=e.filter(p=>p.path.startsWith("scripts/"));e=e.filter(p=>!p.path.startsWith("scripts/"));const i=r.map(p=>p.path.split("/")).map(p=>p.slice(1,p.length-1)),u=dt(i),m=`${(u?["scripts",...i[0].slice(0,u)]:["scripts"]).join("/")}/`,h=r.filter(p=>!p.path.replace(m,"").includes("/")&&p.path.endsWith(".lua")),x=r.filter(p=>!p.path.replace(m,"").includes("/")&&p.path.endsWith(".js"));h.length===1?h[0].path=`${n.scriptName||n.name}/main.lua`:x.length===1&&(x[0].path=`${n.scriptName||n.name}/main.js`);for(const p of r){const I=p.path.replace(m,`${n.scriptName||n.name}/`);p.path=`${c}/scripts/${I}`,t.push(p)}}if(e.find(r=>r.path.startsWith("externals/"))){const r=e.filter(i=>i.path.startsWith("externals/"));e=e.filter(i=>!i.path.startsWith("externals/"));for(const i of r)i.path=i.path.replace("externals/",""),t.push(i)}for(const r of["input.conf","mpv.conf"]){const i=e.findIndex($=>$.path===r);if(i===-1)continue;const u=e.splice(i,1)[0],v=t.findIndex($=>$.path===`${c}/${r}`);let m;v===-1?m=new M(`${c}/${r}`,new Uint8Array,void 0,!1,BigInt(Date.now())):m=t.splice(v,1)[0];const{path:h,mode:x,isDir:p,lastModified:I,buffer:D}=m,y=We(D,u.buffer,n);t.push(new M(h,y,x,p,I))}if(e.find(r=>!r.path.includes("/")&&r.path.endsWith(".conf"))){const r=e.filter(i=>!i.path.includes("/")&&i.path.endsWith(".conf"));e=e.filter(i=>!(!i.path.includes("/")&&i.path.endsWith(".conf")));for(const i of r){const u=e.find(h=>h.path===i.path.replace(".conf",".js")),v=e.find(h=>h.path===i.path.replace(".conf",".lua")),m=u||v?`${c}/script-opts/${i.path}`:i.path;i.path=m,t.push(i)}}if(e.find(r=>!r.path.includes("/")&&st(r.path))){const r=e.filter(i=>!i.path.includes("/")&&st(i.path));e=e.filter(i=>!(!i.path.includes("/")&&st(i.path)));for(const i of r)i.path=`${c}/fonts/${i.path}`,t.push(i)}if(e.find(r=>!r.path.includes("/")&&it(r.path))){const r=e.filter(i=>!i.path.includes("/")&&it(i.path));e=e.filter(i=>!(!i.path.includes("/")&&it(i.path)));for(const i of r)i.path=`${c}/scripts/${i.path}`,t.push(i)}const a=e.filter(r=>!r.path.includes("/")&&r.path.endsWith(".lua")),o=e.filter(r=>!r.path.includes("/")&&r.path.endsWith(".js"));a.length===1?a[0].path="main.lua":o.length===1&&(o[0].path="main.js");for(const r of e)r.path=`${c}/scripts/${n.scriptName||n.name}/${r.path}`,t.push(r)}const je=[["thumbfast","mpv-easy-thumbfast"],["autoload","mpv-easy-autoload"],["uosc","mpv-easy","ModernX cyl0","ModernZ","mpv.net"]],Rt={uosc:["autoload","mpv-easy-autoload"],"mpv-easy":["mpv-easy-anime4k","mpv-easy-clipboard-play","mpv-easy-copy-time","mpv-easy-cut","mpv-easy-translate","mpv-easy-autoload","mpv-easy-copy-screen","mpv-easy-crop","mpv-easy-thumbfast","mpv-easy-frame-seeker"]};function ke(t,e=je){for(const a of e){const o=[];for(const r of t)a.includes(r)&&o.push(r);if(o.length>1)return o}const n=new Set,c=new Set(t);for(const a in t){const o=Rt[a]||[];for(const r of o)c.has(r)&&(n.add(a),n.add(r))}return Array.from(n)}function ct(t){const e=[".ttf",".otf",".woff",".woff2",".eot"],n=t.toLowerCase();return e.some(c=>n.endsWith(c))}function Le(t){const e=t.map(c=>c.path.split("/")).map(c=>c.slice(0,c.length-1)),n=dt(e);if(n&&e.length){const a=`${e[0].slice(0,n).join("/")}/`;for(const o of t)o.path=o.path.replace(a,"")}return t}function Lt(t,e){Le(t);const n=[];for(const a of[".github","docs"])t.find(o=>o.path.startsWith(`${a}/`))&&(t=t.filter(o=>!o.path.startsWith(`${a}/`)));for(const a of["fonts","script-opts","shaders"])if(t.find(o=>o.path.startsWith(`${a}/`))){const o=t.filter(r=>r.path.startsWith(`${a}/`));t=t.filter(r=>!r.path.startsWith(`${a}/`));for(const r of o)n.push(r)}if(t.find(a=>a.path.startsWith("scripts/"))){const a=t.filter(h=>h.path.startsWith("scripts/"));t=t.filter(h=>!h.path.startsWith("scripts/"));const o=a.map(h=>h.path.split("/")).map(h=>h.slice(1,h.length-1)),r=dt(o),u=`${(r?["scripts",...o[0].slice(0,r)]:["scripts"]).join("/")}/`,v=a.filter(h=>!h.path.replace(u,"").includes("/")&&h.path.endsWith(".lua")),m=a.filter(h=>!h.path.replace(u,"").includes("/")&&h.path.endsWith(".js"));v.length===1?v[0].path="scripts/main.lua":m.length===1&&(m[0].path="scripts/main.js");for(const h of a){const x=h.path.replace(u,"scripts/");h.path=x,n.push(h)}}if(t.find(a=>a.path.startsWith("externals/"))){const a=t.filter(o=>o.path.startsWith("externals/"));t=t.filter(o=>!o.path.startsWith("externals/"));for(const o of a)n.push(o)}for(const a of["input.conf","mpv.conf"]){const o=t.findIndex(i=>i.path===a);if(o===-1)continue;const r=t.splice(o,1)[0];n.push(r)}if(t.find(a=>!a.path.includes("/")&&a.path.endsWith(".conf"))){const a=t.filter(o=>!o.path.includes("/")&&o.path.endsWith(".conf"));t=t.filter(o=>!(!o.path.includes("/")&&o.path.endsWith(".conf")));for(const o of a)o.path=`script-opts/${o.path}`,n.push(o)}if(t.find(a=>!a.path.includes("/")&&ct(a.path))){const a=t.filter(o=>!o.path.includes("/")&&ct(o.path));t=t.filter(o=>!(!o.path.includes("/")&&ct(o.path)));for(const o of a)o.path=`fonts/${o.path}`,n.push(o)}if(!t.find(a=>a.path==="scripts/main.lua"||a.path==="scripts/main.js")){const a=t.filter(r=>!r.path.includes("/")&&r.path.endsWith(".lua")),o=t.filter(r=>!r.path.includes("/")&&r.path.endsWith(".js"));if(a.length===1){const r=t.indexOf(a[0]);t.splice(r,1),a[0].path="scripts/main.lua",n.push(a[0])}else if(o.length===1){const r=t.indexOf(o[0]);t.splice(r,1),o[0].path="scripts/main.js",n.push(o[0])}}t.filter(a=>a.path.endsWith(".js")||a.path.endsWith(".lua")).length&&console.log("tryfix maybe failed",e,t.map(a=>a.path).join(" "));for(const a of t)n.push(a);return n}const Ct=t=>{let e;const n=new Set,c=(v,m)=>{const h=typeof v=="function"?v(e):v;if(!Object.is(h,e)){const x=e;e=m??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,x))}},a=()=>e,i={setState:c,getState:a,getInitialState:()=>u,subscribe:v=>(n.add(v),()=>n.delete(v))},u=e=t(c,a,i);return i},Ce=(t=>t?Ct(t):Ct),Te=t=>t;function De(t,e=Te){const n=q.useSyncExternalStore(t.subscribe,q.useCallback(()=>e(t.getState()),[t,e]),q.useCallback(()=>e(t.getInitialState()),[t,e]));return q.useDebugValue(n),n}const Re=t=>{const e=Ce(t),n=c=>De(e,c);return Object.assign(n,e),n},Ue=(t=>Re);function Ut(t,e){let n;try{n=t()}catch{return}return{getItem:a=>{var o;const r=u=>u===null?null:JSON.parse(u,void 0),i=(o=n.getItem(a))!=null?o:null;return i instanceof Promise?i.then(r):r(i)},setItem:(a,o)=>n.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>n.removeItem(a)}}const ht=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(c){return ht(c)(n)},catch(c){return this}}}catch(n){return{then(c){return this},catch(c){return ht(c)(n)}}}},ze=(t,e)=>(n,c,a)=>{let o={storage:Ut(()=>window.localStorage),partialize:y=>y,version:0,merge:(y,$)=>({...$,...y}),...e},r=!1,i=0;const u=new Set,v=new Set;let m=o.storage;if(!m)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...y)},c,a);const h=()=>{const y=o.partialize({...c()});return m.setItem(o.name,{state:y,version:o.version})},x=a.setState;a.setState=(y,$)=>(x(y,$),h());const p=t((...y)=>(n(...y),h()),c,a);a.getInitialState=()=>p;let I;const D=()=>{var y,$;if(!m)return;const z=++i;r=!1,u.forEach(b=>{var W;return b((W=c())!=null?W:p)});const C=(($=o.onRehydrateStorage)==null?void 0:$.call(o,(y=c())!=null?y:p))||void 0;return ht(m.getItem.bind(m))(o.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==o.version){if(o.migrate){const W=o.migrate(b.state,b.version);return W instanceof Promise?W.then(R=>[!0,R]):[!0,W]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var W;if(z!==i)return;const[R,X]=b;if(I=o.merge(X,(W=c())!=null?W:p),n(I,!0),R)return h()}).then(()=>{z===i&&(C?.(I,void 0),I=c(),r=!0,v.forEach(b=>b(I)))}).catch(b=>{z===i&&C?.(void 0,b)})};return a.persist={setOptions:y=>{o={...o,...y},y.storage&&(m=y.storage)},clearStorage:()=>{m?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>D(),hasHydrated:()=>r,onHydrate:y=>(u.add(y),()=>{u.delete(y)}),onFinishHydration:y=>(v.add(y),()=>{v.delete(y)})},o.skipHydration||D(),I||p},Oe=ze,zt="https://cdn.jsdelivr.net";async function _e(t){const e=await fetch(t).then(n=>n.arrayBuffer());return new Uint8Array(e)}async function Be(t){const e=Ee(t);if(!e)return[];const n=/<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,c=[];for(const a of Array.from(e.matchAll(n),([,o,r])=>{const i=o.endsWith("/");return{path:o.split("/").slice(4).join("/"),url:zt+o,name:r,isDir:i}}))a.isDir||(a.buffer=await _e(a.url)),a.name!=="..."&&c.push(a);return c}function Ee(t){const e=/<table[^>]*>([\s\S]*?)<\/table>/i,n=t.match(e);return n?n[1].trim():null}async function Ot(t,e,n){const c=await fetch(n).then(r=>r.text()),a=await Be(c),o=[];for(const r of a)if(r.isDir){const i=n+r.path,u=await Ot(t,e,i);for(const v of u)o.push(v)}else o.push(r);return o}function ut(t,e){const n=zt+`/gh/${t}/${e}/`;return Ot(t,e,n)}const Me=["mpv","mpv-v3","mpv.net","mpv-qjs"],_t={data:{},tableData:[],spinning:!1,selectedRowKeys:[],externalList:[],ui:"osc",platform:"mpv-v3",repos:[]},_=[{name:"osc",repo:"https://github.com/mpv-player/mpv",deps:["autoload","thumbfast"],requires:[]},{name:"uosc",repo:"https://github.com/tomasklaen/uosc",deps:["thumbfast"],requires:["uosc"]},{name:"mpv-easy",repo:"https://github.com/mpv-easy/mpv-easy",deps:[],requires:["mpv-easy"]},{name:"modernx",repo:"https://github.com/cyl0/ModernX",deps:["thumbfast","autoload"],requires:["ModernX cyl0"]},{name:"modernz",repo:"https://github.com/Samillion/ModernZ",deps:["thumbfast","autoload"],requires:["ModernZ"]}],Ae=["ffmpeg","yt-dlp","play-with"];function G(t,e){const n=new Blob([new Uint8Array(e)],{type:"application/octet-stream"}),c=URL.createObjectURL(n),a=document.createElement("a"),o=t.split("/").at(-1)??t;a.download=o,a.href=c,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(c)}function He(t,e,n,c){return`https://raw.githubusercontent.com/${t}/${e}/${n}/${c}`}function k(t){return He("ahaoboy","mpv-easy-cdn","main",t)}function Ne(){return k("mpv-easy-play-with-windows.zip")}function qe(){return k("yt-dlp.zip")}function Je(){return k("ffmpeg-windows.tar.xz")}async function U(t){return fetch(t).then(e=>e.arrayBuffer()).then(e=>new Uint8Array(e))}function Bt(t){return k(`${t}.zip`)}async function Ke(t){if(t.repo)return(await ut(t.repo.user,t.repo.repo)).filter(r=>!r.isDir).map(({path:r,buffer:i})=>new M(r,i,void 0,!1,null));const{download:e}=t;if(![".js",".lua",".zip"].some(o=>e.endsWith(o)))return console.log("not support script: ",t),[];const n=Bt(t.name),c=await U(n);return B(E(n),c).filter(o=>!o.isDir)}async function Ze(t){let e=k("mpv-windows.tar.xz");t==="mpv.net"?e=k("mpv.net.tar.xz"):t==="mpv-v3"?e=k("mpv-v3-windows.tar.xz"):t==="mpv-qjs"&&(e=k("mpv-qjs-windows.tar.xz"));const n=await U(e);return B(E(e),n)||[]}const lt=150,ft=150,Tt=250,Ge={getItem:t=>{const n=new URLSearchParams(location.hash.slice(1)).get(t)??"";return JSON.parse(n)},setItem:(t,e)=>{const n=new URLSearchParams(location.hash.slice(1));n.set(t,JSON.stringify(e)),location.hash=n.toString()},removeItem:t=>{const e=new URLSearchParams(location.hash.slice(1));e.delete(t),location.hash=e.toString()}},Xe=Ue()(Oe((t,e)=>({..._t,setData:n=>t({...e(),data:n}),setTableData:n=>t({...e(),tableData:n}),setSpinning:n=>t({...e(),spinning:n}),setSelectedKeys:n=>t({...e(),selectedRowKeys:n}),setExternalList:n=>t({...e(),externalList:n}),setUI:n=>t({...e(),ui:n}),setPlatform:n=>t({...e(),platform:n}),setState:n=>{t({...e(),...n})},setRepos:n=>t({...e(),repos:n})}),{name:"mpv-build",storage:Ut(()=>Ge),version:void 0,partialize:t=>Object.fromEntries(Object.entries(t).filter(([e])=>!["data","tableData","spinning"].includes(e)))}));function Ye(){const t=Xe(),e=ee(null),{data:n,tableData:c,spinning:a,selectedRowKeys:o,externalList:r,ui:i,setData:u,setTableData:v,setSpinning:m,setUI:h,setSelectedKeys:x,setExternalList:p,platform:I,setPlatform:D,setState:y,repos:$,setRepos:z}=t,C=i==="mpv-easy"?"mpv-easy":`mpv-${i}`,[b,W]=J(window.matchMedia("(prefers-color-scheme: dark)").matches),[R,X]=J(""),[Y,A]=J(0),[H,Et]=J(10),pt=ne(()=>oe({palette:{mode:b?"dark":"light"},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}}}}),[b]),V=_.find(s=>s.name===i)?.requires||[],Mt=()=>{y({..._t,data:n,tableData:c}),A(0)},At=[...o,..._.find(s=>s.name===i)?.requires||[]],mt=async s=>{for(const f of At){const d=n[f];if(d.repo){const{user:w,repo:g}=d.repo,L=(await ut(w,g)).filter(F=>!F.isDir).map(({path:F,buffer:Ft})=>new M(F,Ft,void 0,!1,null)),N=Lt(L,d),Q=`${w}-${g}`;kt(s,N,n[Q])}else{const w=await Ke(n[f]),g=Lt(w,d);kt(s,g,n[f])}}},Ht=async()=>{const s=[];await mt(s);for(const d of s)d.path=d.path.replace("portable_config/","");const f=at(rt.Zip,s);if(!f){console.log("zip file error");return}return f},Nt=async()=>{const s=await Ze(I);if(r.includes("ffmpeg")){const d=Je(),w=await U(d),g=B(E(d),w);for(const P of g)s.push(P)}if(r.includes("yt-dlp")){const d=qe(),w=await U(d),g=B(E(d),w);for(const P of g)s.push(P)}if(r.includes("play-with")){const d=Ne(),w=await U(d),g=B(E(d),w);for(const P of g)s.push(P)}await mt(s);const f=at(rt.Zip,s);if(!f){console.log("zip file error");return}return f},qt=async()=>{m(!0),await new Promise(f=>setTimeout(f));const s=await Nt();m(!1),s&&G(`${C}.zip`,s)},Jt=async()=>{m(!0),await new Promise(f=>setTimeout(f));const s=await Ht();m(!1),s&&G("portable_config.zip",s)},gt=async()=>{const s=k("scripts-full.json"),f=await fetch(s).then(g=>g.text()).then(g=>JSON.parse(g));for(const g in f)f[g].key=g;for(const{user:g,repo:P}of $){const L=`${g}-${P}`,N=`https://github.com/${g}/${P}`,Q={key:L,name:L,download:L,author:g,description:N,homepage:N,repo:{user:g,repo:P}};f[L]=Q}u(f);const d=o.map(g=>f[g]),w=Object.values(f).sort(()=>.5-Math.random()).filter(g=>!o.includes(g.name));v([...d,...w]),e.current=new Se(Object.values(f),{keys:["name"]})};wt(()=>{gt()},[]),wt(()=>{gt()},[$]);const yt=()=>{const s=R.trim();if(!s)return;const f=Pe(s);if(f){x([...new Set([...o,`${f.user}-${f.repo}`])]),z([...new Set([...$,f])]);return}const d=e.current?.search(s);d?.length&&(v(d.map(w=>w.item)),A(0))},Kt=s=>{s.key==="Enter"&&yt()},Zt=(s,f)=>{x(f?[...o,s.name]:[...o].filter(d=>d!==s.name))},Gt=(s,f)=>{A(f)},Xt=s=>{Et(parseInt(s.target.value,10)),A(0)},Yt=async s=>{if(s.repo){const w=(await ut(s.repo.user,s.repo.repo)).filter(P=>!P.isDir).map(({path:P,buffer:L})=>new M(P,L,void 0,!1,null)),g=at(rt.Zip,w);g&&G(`${s.repo.repo}.zip`,g);return}const f=await U(Bt(s.name));G(`${s.name}.zip`,f)};if(!Object.keys(n).length)return S(bt,{theme:pt,children:[l(xt,{}),l(St,{className:"main",display:"flex",flexDirection:"column",gap:1,justifyContent:"center",alignItems:"center",minHeight:"100vh",children:l(K,{variant:"h5",children:"Loading..."})})]});const vt=ke([...o,..._.find(s=>s.name===i)?.requires||[]]),Vt=Rt[i]||[],Qt=c.slice(Y*H,Y*H+H);return S(bt,{theme:pt,children:[l(xt,{}),S(St,{className:["main",b?"main-dark":"main-light"].join(" "),display:"flex",flexDirection:"column",gap:1,justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2,children:[S(T,{direction:"row",gap:1,alignItems:"center",sx:{position:"absolute",top:"1rem",right:"1rem"},children:[l(O,{href:"https://github.com/mpv-easy/mpv-easy",target:"_blank",color:"inherit",children:l(ge,{})}),l(O,{href:"https://www.youtube.com/@mpveasy",target:"_blank",color:"inherit",children:l(ye,{})}),l(O,{href:"https://x.com/mpv_easy",target:"_blank",color:"inherit",children:l(ve,{})}),l(tt,{onClick:()=>W(!b),color:"inherit",children:b?l(we,{}):l(be,{})})]}),S(T,{gap:1,alignItems:"flex-start",children:[S(T,{direction:"row",gap:1,alignItems:"center",children:[l(It,{title:"mpv-v3 is for newer CPUs (usually after 2005). If it doesn't run, please use mpv",children:l(K,{variant:"subtitle1",fontWeight:"bold",sx:{width:lt},children:"Platform:"})}),l($t,{row:!0,value:I,onChange:s=>D(s.target.value),children:Me.map(s=>l(It,{placement:"top",title:s==="mpv"?"Typically, you should use mpv-v3 unless it fails to run or you're using an older CPU (manufactured around 2015 or earlier).":"",children:l(et,{value:s,control:l(Pt,{}),label:s,sx:{width:ft}})},s))})]}),S(T,{direction:"row",gap:1,alignItems:"center",children:[l(K,{variant:"subtitle1",fontWeight:"bold",sx:{width:lt},children:"UI:"}),l($t,{row:!0,value:i,onChange:s=>{const f=s.target.value;h(f);const d=_.find(w=>w.name===f)?.deps||[];x([...d])},children:_.map(s=>l(et,{value:s.name,control:l(Pt,{}),label:l(O,{href:s.repo,target:"_blank",underline:"hover",children:s.name}),sx:{width:ft}},s.name))})]}),S(T,{direction:"row",gap:1,alignItems:"center",children:[l(K,{variant:"subtitle1",fontWeight:"bold",sx:{width:lt},children:"External:"}),l(ae,{row:!0,children:Ae.map(s=>l(et,{control:l(Wt,{checked:r.includes(s),onChange:f=>{f.target.checked?p([...r,s]):p(r.filter(d=>d!==s))}}),label:s,sx:{width:ft}},s))})]})]}),l(re,{placeholder:"input script name or https://github.com/<user>/<repo>",value:R,onChange:s=>X(s.target.value),onKeyDown:Kt,sx:{width:"100%",maxWidth:800},InputProps:{endAdornment:l(se,{position:"end",children:l(tt,{onClick:yt,edge:"end",children:l(xe,{})})})}}),S(ie,{component:ce,sx:{width:"calc(100vw - 32px)",maxWidth:"100%",maxHeight:"60vh",overflow:"auto"},children:[S(le,{size:"small",stickyHeader:!0,children:[l(fe,{children:S(jt,{children:[l(j,{padding:"checkbox"}),l(j,{sx:{width:Tt},children:"name"}),l(j,{children:"description"}),l(j,{children:"author"}),l(j,{children:"download"})]})}),l(he,{children:Qt.map(s=>{const f=o.includes(s.name)||V.includes(s.name),d=V.includes(s.name)||Vt.includes(s.name);return S(jt,{hover:!0,children:[l(j,{padding:"checkbox",children:l(Wt,{checked:f,disabled:d,onChange:w=>Zt(s,w.target.checked)})}),l(j,{sx:{width:Tt},children:l(O,{href:s.homepage,target:"_blank",rel:"noreferrer",underline:"hover",children:s.name})}),l(j,{children:s.description}),l(j,{children:s.author}),l(j,{children:l(tt,{size:"small",onClick:()=>Yt(s),children:l(ot,{})})})]},s.key)})})]}),l(ue,{component:"div",count:c.length,page:Y,onPageChange:Gt,rowsPerPage:H,onRowsPerPageChange:Xt,rowsPerPageOptions:[5,10,25,50]})]}),l(de,{open:a,sx:{zIndex:9999},children:l(pe,{color:"inherit"})}),S(T,{direction:"row",flexWrap:"wrap",gap:1,justifyContent:"center",children:[l(Z,{label:I,color:"primary",variant:"outlined"}),V.map((s,f)=>n[s]&&l(Z,{label:n[s]?.name,color:"success",variant:"outlined"},n[s]?.key+f)),r.map(s=>l(Z,{label:s,color:"success",variant:"outlined"},s)),o.map((s,f)=>l(Z,{label:n[s]?.name,color:"success",variant:"outlined",onDelete:()=>{const d=o.indexOf(n[s]?.key);if(d!==-1){const w=[...o];w.splice(d,1),x(w)}}},n[s]?.key+f))]}),S(T,{direction:"row",gap:1,children:[l(nt,{variant:"contained",color:"error",size:"large",onClick:Mt,children:"Reset"}),S(nt,{variant:"contained",color:"primary",size:"large",startIcon:l(ot,{}),onClick:qt,children:[C,".zip"]}),l(nt,{variant:"contained",color:"primary",size:"large",startIcon:l(ot,{}),onClick:Jt,children:"portable_config.zip"})]}),!!vt.length&&S(me,{severity:"error",children:["conflict: ",vt.join(" ")]})]})]})}te(document.getElementById("root")).render(l(Ye,{}));
