import{jsx as f,jsxs as P}from"https://esm.sh/react/jsx-runtime";import{createRoot as ht}from"https://esm.sh/react-dom/client";import A,{useEffect as dt,useRef as Tt,useState as _t}from"https://esm.sh/react";import{unstableSetRender as Ct,theme as Ut,Input as Rt,Typography as j,notification as Dt,Flex as O,ConfigProvider as zt,Tooltip as it,Radio as B,Checkbox as ct,Table as Et,Spin as Mt,Tag as N,Button as H,Alert as At}from"https://esm.sh/antd?standalone";import{GithubOutlined as Bt,YoutubeOutlined as Nt,TwitterOutlined as Ht,SunOutlined as qt,MoonOutlined as Jt,DownloadOutlined as G}from"https://esm.sh/@ant-design/icons?standalone";import Kt from"https://esm.sh/fuse.js?standalone";import{File as E,decode as D,guess as z,encode as X,Fmt as Y}from"https://esm.sh/@easy-install/easy-archive?standalone";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const Zt="ttf,otf,woff,woff2,eot".split(",");function Gt(t,e){if(!t?.length)return!1;for(const n of e){if(n.length===0)return!t.includes(".");if(t.endsWith(`.${n}`))return!0}return!1}function Q(t,e=Zt){return Gt(t.toLocaleLowerCase(),e)}function Xt(t){try{const e=new URL(t);if(e.hostname!=="github.com")return;const n=e.pathname.split("/").filter(Boolean);return n.length<2?void 0:{user:n[0],repo:n[1]}}catch{return}}function Yt(t,e,n){const c=new TextDecoder("utf-8"),r=c.decode(t),o="#".repeat(4),s=[o,n.name,o].join(" ");if(r.includes(s))return t;const i=c.decode(e).trim(),h=[r,"",s,i,s,""].join(`
`).trimStart();return new TextEncoder().encode(h)}function ot(t){if(t.length===0)return 0;if(t.length===1)return t[0].length;let e=0;const n=t[0];for(let c=0;c<n.length;c++){const r=n[c];if(t.every(o=>o[c]===r))e++;else break}return e}function lt(t,e,n,c="portable_config"){for(const s of["fonts","script-opts","shaders"])if(e.find(i=>i.path.startsWith(`${s}/`))){const i=e.filter(h=>h.path.startsWith(`${s}/`));e=e.filter(h=>!h.path.startsWith(`${s}/`));for(const h of i)h.path=`${c}/${s}/${h.path.replace(`${s}/`,"")}`,t.push(h)}if(e.find(s=>s.path.startsWith("scripts/"))){const s=e.filter(p=>p.path.startsWith("scripts/"));e=e.filter(p=>!p.path.startsWith("scripts/"));const i=s.map(p=>p.path.split("/")).map(p=>p.slice(1,p.length-1)),h=ot(i),v=`${(h?["scripts",...i[0].slice(0,h)]:["scripts"]).join("/")}/`,u=s.filter(p=>!p.path.replace(v,"").includes("/")&&p.path.endsWith(".lua")),b=s.filter(p=>!p.path.replace(v,"").includes("/")&&p.path.endsWith(".js"));u.length===1?u[0].path=`${n.scriptName||n.name}/main.lua`:b.length===1&&(b[0].path=`${n.scriptName||n.name}/main.js`);for(const p of s){const $=p.path.replace(v,`${n.scriptName||n.name}/`);p.path=`${c}/scripts/${$}`,t.push(p)}}if(e.find(s=>s.path.startsWith("externals/"))){const s=e.filter(i=>i.path.startsWith("externals/"));e=e.filter(i=>!i.path.startsWith("externals/"));for(const i of s)i.path=i.path.replace("externals/",""),t.push(i)}for(const s of["input.conf","mpv.conf"]){const i=e.findIndex(I=>I.path===s);if(i===-1)continue;const h=e.splice(i,1)[0],m=t.findIndex(I=>I.path===`${c}/${s}`);let v;m===-1?v=new E(`${c}/${s}`,new Uint8Array,void 0,!1,BigInt(Date.now())):v=t.splice(m,1)[0];const{path:u,mode:b,isDir:p,lastModified:$,buffer:g}=v,k=Yt(g,h.buffer,n);t.push(new E(u,k,b,p,$))}if(e.find(s=>!s.path.includes("/")&&s.path.endsWith(".conf"))){const s=e.filter(i=>!i.path.includes("/")&&i.path.endsWith(".conf"));e=e.filter(i=>!(!i.path.includes("/")&&i.path.endsWith(".conf")));for(const i of s){const h=e.find(u=>u.path===i.path.replace(".conf",".js")),m=e.find(u=>u.path===i.path.replace(".conf",".lua")),v=h||m?`${c}/script-opts/${i.path}`:i.path;i.path=v,t.push(i)}}if(e.find(s=>!s.path.includes("/")&&Q(s.path))){const s=e.filter(i=>!i.path.includes("/")&&Q(i.path));e=e.filter(i=>!(!i.path.includes("/")&&Q(i.path)));for(const i of s)i.path=`${c}/fonts/${i.path}`,t.push(i)}const r=e.filter(s=>!s.path.includes("/")&&s.path.endsWith(".lua")),o=e.filter(s=>!s.path.includes("/")&&s.path.endsWith(".js"));r.length===1?r[0].path="main.lua":o.length===1&&(o[0].path="main.js");for(const s of e)s.path=`${c}/scripts/${n.scriptName||n.name}/${s.path}`,t.push(s)}const Qt=[["thumbfast","mpv-easy-thumbfast"],["autoload","mpv-easy-autoload"],["uosc","mpv-easy","ModernX cyl0","ModernZ","mpv.net"]],pt={uosc:["autoload","mpv-easy-autoload"],"mpv-easy":["mpv-easy-anime4k","mpv-easy-clipboard-play","mpv-easy-copy-time","mpv-easy-cut","mpv-easy-translate","mpv-easy-autoload","mpv-easy-copy-screen","mpv-easy-crop","mpv-easy-thumbfast"]};function Vt(t,e=Qt){for(const r of e){const o=[];for(const s of t)r.includes(s)&&o.push(s);if(o.length>1)return o}const n=new Set,c=new Set(t);for(const r in t){const o=pt[r]||[];for(const s of o)c.has(s)&&(n.add(r),n.add(s))}return Array.from(n)}function V(t){const e=[".ttf",".otf",".woff",".woff2",".eot"],n=t.toLowerCase();return e.some(c=>n.endsWith(c))}function Ft(t){const e=t.map(c=>c.path.split("/")).map(c=>c.slice(0,c.length-1)),n=ot(e);if(n&&e.length){const r=`${e[0].slice(0,n).join("/")}/`;for(const o of t)o.path=o.path.replace(r,"")}return t}function ft(t,e){Ft(t);const n=[];for(const r of[".github","docs"])t.find(o=>o.path.startsWith(`${r}/`))&&(t=t.filter(o=>!o.path.startsWith(`${r}/`)));for(const r of["fonts","script-opts","shaders"])if(t.find(o=>o.path.startsWith(`${r}/`))){const o=t.filter(s=>s.path.startsWith(`${r}/`));t=t.filter(s=>!s.path.startsWith(`${r}/`));for(const s of o)n.push(s)}if(t.find(r=>r.path.startsWith("scripts/"))){const r=t.filter(u=>u.path.startsWith("scripts/"));t=t.filter(u=>!u.path.startsWith("scripts/"));const o=r.map(u=>u.path.split("/")).map(u=>u.slice(1,u.length-1)),s=ot(o),h=`${(s?["scripts",...o[0].slice(0,s)]:["scripts"]).join("/")}/`,m=r.filter(u=>!u.path.replace(h,"").includes("/")&&u.path.endsWith(".lua")),v=r.filter(u=>!u.path.replace(h,"").includes("/")&&u.path.endsWith(".js"));m.length===1?m[0].path="scripts/main.lua":v.length===1&&(v[0].path="scripts/main.js");for(const u of r){const b=u.path.replace(h,"scripts/");u.path=b,n.push(u)}}if(t.find(r=>r.path.startsWith("externals/"))){const r=t.filter(o=>o.path.startsWith("externals/"));t=t.filter(o=>!o.path.startsWith("externals/"));for(const o of r)n.push(o)}for(const r of["input.conf","mpv.conf"]){const o=t.findIndex(i=>i.path===r);if(o===-1)continue;const s=t.splice(o,1)[0];n.push(s)}if(t.find(r=>!r.path.includes("/")&&r.path.endsWith(".conf"))){const r=t.filter(o=>!o.path.includes("/")&&o.path.endsWith(".conf"));t=t.filter(o=>!(!o.path.includes("/")&&o.path.endsWith(".conf")));for(const o of r)o.path=`script-opts/${o.path}`,n.push(o)}if(t.find(r=>!r.path.includes("/")&&V(r.path))){const r=t.filter(o=>!o.path.includes("/")&&V(o.path));t=t.filter(o=>!(!o.path.includes("/")&&V(o.path)));for(const o of r)o.path=`fonts/${o.path}`,n.push(o)}if(!t.find(r=>r.path==="scripts/main.lua"||r.path==="scripts/main.js")){const r=t.filter(s=>!s.path.includes("/")&&s.path.endsWith(".lua")),o=t.filter(s=>!s.path.includes("/")&&s.path.endsWith(".js"));if(r.length===1){const s=t.indexOf(r[0]);t.splice(s,1),r[0].path="scripts/main.lua",n.push(r[0])}else if(o.length===1){const s=t.indexOf(o[0]);t.splice(s,1),o[0].path="scripts/main.js",n.push(o[0])}}t.filter(r=>r.path.endsWith(".js")||r.path.endsWith(".lua")).length&&console.log("tryfix maybe failed",e,t.map(r=>r.path).join(" "));for(const r of t)n.push(r);return n}var te=function(t){dt(t,[])},ee=function(t){te(function(){t()})};const ut=t=>{let e;const n=new Set,c=(m,v)=>{const u=typeof m=="function"?m(e):m;if(!Object.is(u,e)){const b=e;e=v??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(p=>p(e,b))}},r=()=>e,i={setState:c,getState:r,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m))},h=e=t(c,r,i);return i},ne=(t=>t?ut(t):ut),oe=t=>t;function re(t,e=oe){const n=A.useSyncExternalStore(t.subscribe,A.useCallback(()=>e(t.getState()),[t,e]),A.useCallback(()=>e(t.getInitialState()),[t,e]));return A.useDebugValue(n),n}const se=t=>{const e=ne(t),n=c=>re(e,c);return Object.assign(n,e),n},ae=(t=>se);function mt(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var o;const s=h=>h===null?null:JSON.parse(h,void 0),i=(o=n.getItem(r))!=null?o:null;return i instanceof Promise?i.then(s):s(i)},setItem:(r,o)=>n.setItem(r,JSON.stringify(o,void 0)),removeItem:r=>n.removeItem(r)}}const et=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(c){return et(c)(n)},catch(c){return this}}}catch(n){return{then(c){return this},catch(c){return et(c)(n)}}}},ie=(t,e)=>(n,c,r)=>{let o={storage:mt(()=>localStorage),partialize:g=>g,version:0,merge:(g,k)=>({...k,...g}),...e},s=!1;const i=new Set,h=new Set;let m=o.storage;if(!m)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},c,r);const v=()=>{const g=o.partialize({...c()});return m.setItem(o.name,{state:g,version:o.version})},u=r.setState;r.setState=(g,k)=>(u(g,k),v());const b=t((...g)=>(n(...g),v()),c,r);r.getInitialState=()=>b;let p;const $=()=>{var g,k;if(!m)return;s=!1,i.forEach(S=>{var L;return S((L=c())!=null?L:b)});const I=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(g=c())!=null?g:b))||void 0;return et(m.getItem.bind(m))(o.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==o.version){if(o.migrate){const L=o.migrate(S.state,S.version);return L instanceof Promise?L.then(_=>[!0,_]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var L;const[_,M]=S;if(p=o.merge(M,(L=c())!=null?L:b),n(p,!0),_)return v()}).then(()=>{I?.(p,void 0),p=c(),s=!0,h.forEach(S=>S(p))}).catch(S=>{I?.(void 0,S)})};return r.persist={setOptions:g=>{o={...o,...g},g.storage&&(m=g.storage)},clearStorage:()=>{m?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>$(),hasHydrated:()=>s,onHydrate:g=>(i.add(g),()=>{i.delete(g)}),onFinishHydration:g=>(h.add(g),()=>{h.delete(g)})},o.skipHydration||$(),p||b},ce=ie;Ct(function(t,e){e._reactRoot||(e._reactRoot=ht(e));var n=e._reactRoot;return n.render(t),function(){return new Promise(function(c){setTimeout(function(){n.unmount(),c()},0)})}});const gt="https://cdn.jsdelivr.net";async function le(t){const e=await fetch(t).then(n=>n.arrayBuffer());return new Uint8Array(e)}async function fe(t){const e=ue(t);if(!e)return[];const n=/<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,c=[];for(const r of Array.from(e.matchAll(n),([,o,s])=>{const i=o.endsWith("/");return{path:o.split("/").slice(4).join("/"),url:gt+o,name:s,isDir:i}}))r.isDir||(r.buffer=await le(r.url)),r.name!=="..."&&c.push(r);return c}function ue(t){const e=/<table[^>]*>([\s\S]*?)<\/table>/i,n=t.match(e);return n?n[1].trim():null}async function yt(t,e,n){const c=await fetch(n).then(s=>s.text()),r=await fe(c),o=[];for(const s of r)if(s.isDir){const i=n+s.path,h=await yt(t,e,i);for(const m of h)o.push(m)}else o.push(s);return o}function nt(t,e){const n=gt+`/gh/${t}/${e}/`;return yt(t,e,n)}const he=["mpv","mpv-v3","mpv.net"],vt={data:{},tableData:[],spinning:!1,selectedRowKeys:[],externalList:[],ui:"osc",platform:"mpv-v3",repos:[]},R=[{name:"osc",repo:"https://github.com/mpv-player/mpv",deps:["autoload","thumbfast"],requires:[]},{name:"uosc",repo:"https://github.com/tomasklaen/uosc",deps:["thumbfast"],requires:["uosc"]},{name:"mpv-easy",repo:"https://github.com/mpv-easy/mpv-easy",deps:[],requires:["mpv-easy"]},{name:"modernx",repo:"https://github.com/cyl0/ModernX",deps:["thumbfast","autoload"],requires:["ModernX cyl0"]},{name:"modernz",repo:"https://github.com/Samillion/ModernZ",deps:["thumbfast","autoload"],requires:["ModernZ"]}],de=["ffmpeg","yt-dlp","play-with"];function q(t,e){const n=new Blob([new Uint8Array(e)],{type:"application/octet-stream"}),c=URL.createObjectURL(n),r=document.createElement("a"),o=t.split("/").at(-1)??t;r.download=o,r.href=c,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(c)}function pe(t,e,n,c){return`https://raw.githubusercontent.com/${t}/${e}/${n}/${c}`}function T(t){return pe("ahaoboy","mpv-easy-cdn","main",t)}function me(){return T("mpv-easy-play-with-windows.zip")}function ge(){return T("yt-dlp.zip")}function ye(){return T("ffmpeg-windows.tar.xz")}function ve(){return T("ffmpeg-v3-windows.tar.xz")}async function U(t){return fetch(t).then(e=>e.arrayBuffer()).then(e=>new Uint8Array(e))}function wt(t){return T(`${t}.zip`)}async function we(t){if(t.repo)return(await nt(t.repo.user,t.repo.repo)).filter(s=>!s.isDir).map(({path:s,buffer:i})=>new E(s,i,void 0,!1,null));const{download:e}=t;if(![".js",".lua",".zip"].some(o=>e.endsWith(o)))return console.log("not support script: ",t),[];const n=wt(t.name),c=await U(n);return D(z(n),c).filter(o=>!o.isDir)}async function be(t){let e=T("mpv-windows.tar.xz");t==="mpv.net"&&(e=T("mpv.net.tar.xz"));const n=await U(e);return D(z(e),n)||[]}const{defaultAlgorithm:Se,darkAlgorithm:xe}=Ut,{Search:$e}=Rt,{Title:Ie,Link:Le}=j,je={getItem:t=>{const n=new URLSearchParams(location.hash.slice(1)).get(t)??"";return JSON.parse(n)},setItem:(t,e)=>{const n=new URLSearchParams(location.hash.slice(1));n.set(t,JSON.stringify(e)),location.hash=n.toString()},removeItem:t=>{const e=new URLSearchParams(location.hash.slice(1));e.delete(t),location.hash=e.toString()}},F=150,tt=150,ke=250,We=ae()(ce((t,e)=>({...vt,setData:n=>t({...e(),data:n}),setTableData:n=>t({...e(),tableData:n}),setSpinning:n=>t({...e(),spinning:n}),setSelectedKeys:n=>t({...e(),selectedRowKeys:n}),setExternalList:n=>t({...e(),externalList:n}),setUI:n=>t({...e(),ui:n}),setPlatform:n=>t({...e(),platform:n}),setState:n=>{t({...e(),...n})},setRepos:n=>t({...e(),repos:n})}),{name:"mpv-build",storage:mt(()=>je),version:void 0,partialize:t=>Object.fromEntries(Object.entries(t).filter(([e])=>!["data","tableData","spinning"].includes(e)))}));function Pe(){const t=We(),e=Tt(null),{data:n,tableData:c,spinning:r,selectedRowKeys:o,externalList:s,ui:i,setData:h,setTableData:m,setSpinning:v,setUI:u,setSelectedKeys:b,setExternalList:p,platform:$,setPlatform:g,setState:k,repos:I,setRepos:S}=t,L=i==="mpv-easy"?"mpv-easy":`mpv-${i}`,[_,M]=_t(window.matchMedia("(prefers-color-scheme: dark)").matches),J=R.find(a=>a.name===i)?.requires||[],[Oe,bt]=Dt.useNotification(),St=()=>{k({...vt,data:n,tableData:c})},xt=[...o,...R.find(a=>a.name===i)?.requires||[]],rt=async a=>{for(const l of xt){const y=n[l];if(y.repo){const{user:w,repo:d}=y.repo,W=(await nt(w,d)).filter(Z=>!Z.isDir).map(({path:Z,buffer:Ot})=>new E(Z,Ot,void 0,!1,null)),C=ft(W,y),K=`${w}-${d}`;lt(a,C,n[K])}else{const w=await we(n[l]),d=ft(w,y);lt(a,d,n[l])}}},$t=async()=>{const a=[];await rt(a);for(const y of a)y.path=y.path.replace("portable_config/","");const l=X(Y.Zip,a);if(!l){console.log("zip file error");return}return l},It=async()=>{const a=await be($);if(s.includes("ffmpeg")){const y=$==="mpv-v3"?ve():ye(),w=await U(y),d=D(z(y),w);for(const x of d)a.push(x)}if(s.includes("yt-dlp")){const y=ge(),w=await U(y),d=D(z(y),w);for(const x of d)a.push(x)}if(s.includes("play-with")){const y=me(),w=await U(y),d=D(z(y),w);for(const x of d)a.push(x)}await rt(a);const l=X(Y.Zip,a);if(!l){console.log("zip file error");return}return l},Lt=async()=>{v(!0),await new Promise(l=>setTimeout(l));const a=await It();v(!1),a&&q(`${L}.zip`,a)},jt=async()=>{v(!0),await new Promise(l=>setTimeout(l));const a=await $t();v(!1),a&&q("portable_config.zip",a)},st=async()=>{const a=T("scripts-full.json"),l=await fetch(a).then(d=>d.text()).then(d=>JSON.parse(d));for(const d in l)l[d].key=d;for(const{user:d,repo:x}of I){const W=`${d}-${x}`,C=`https://github.com/${d}/${x}`,K={key:W,name:W,download:W,author:d,description:C,homepage:C,repo:{user:d,repo:x}};l[W]=K}h(l);const y=o.map(d=>l[d]),w=Object.values(l).sort(()=>.5-Math.random()).filter(d=>!o.includes(d.name));m([...y,...w]),e.current=new Kt(Object.values(l),{keys:["name"]})};ee(st),dt(()=>{st()},[I]);const kt=[{title:"name",dataIndex:"name",key:"key",render:(a,l)=>f(Le,{href:l.homepage,target:"_blank",rel:"noreferrer",children:l.name}),width:ke},{title:"description",dataIndex:"description",key:"key"},{title:"author",dataIndex:"author",key:"url"},{title:"download",dataIndex:"download",key:"url",render:(a,l)=>f(H,{icon:f(G,{}),onClick:async()=>{if(l.repo){const d=(await nt(l.repo.user,l.repo.repo)).filter(W=>!W.isDir).map(({path:W,buffer:C})=>new E(W,C,void 0,!1,null)),x=X(Y.Zip,d);x&&q(`${l.repo.repo}.zip`,x);return}const y=await U(wt(l.name));q(`${l.name}.zip`,y)}},l.download)}],Wt=(a,l,y)=>{const w=Xt(a);if(w){b([...new Set([...o,`${w.user}-${w.repo}`])]),S([...new Set([...I,w])]);return}const d=e.current?.search(a);d?.length&&m(d.map(x=>x.item))};if(!Object.keys(n).length)return f(O,{className:"main",vertical:!0,gap:"middle",justify:"center",align:"center",children:f(j,{children:f(Ie,{level:3,children:"Loading..."})})});const at=Vt([...o,...R.find(a=>a.name===i)?.requires||[]]),Pt=pt[i]||[];return P(zt,{theme:{algorithm:_?xe:Se},children:[bt,P(O,{className:["main",_?"main-dark":"main-light"].join(" "),vertical:!0,gap:"middle",justify:"center",align:"center",children:[P(O,{gap:"middle",justify:"center",align:"center",style:{position:"absolute",top:"1rem",right:"1rem"},children:[f(j.Link,{href:"https://github.com/mpv-easy/mpv-easy",target:"_blank",children:f(Bt,{})}),f(j.Link,{href:"https://www.youtube.com/@mpveasy",target:"_blank",children:f(Nt,{})}),f(j.Link,{href:"https://x.com/mpv_easy",target:"_blank",children:f(Ht,{})}),_?f(j.Link,{onClick:()=>M(!1),children:f(qt,{})}):f(j.Link,{onClick:()=>M(!0),children:f(Jt,{})})]}),P(O,{gap:"middle",vertical:!0,align:"start",children:[P(O,{gap:"middle",justify:"center",align:"center",children:[f(j.Title,{level:5,style:{margin:0,width:F},children:f(it,{title:"mpv-v3 is for newer CPUs (usually after 2005). If it doesn't run, please use mpv",children:"Platform:"})}),f(B.Group,{value:$,onChange:a=>{g(a.target.value)},children:he.map(a=>f(it,{placement:"topLeft",title:a==="mpv"?"Typically, you should use mpv-v3 unless it fails to run or you're using an older CPU (manufactured around 2015 or earlier).":"",children:f(B,{value:a,style:{width:tt},children:a},a)},a))})]}),P(O,{gap:"middle",justify:"center",align:"center",children:[f(j.Title,{level:5,style:{margin:0,width:F},children:"UI:"}),f(B.Group,{onChange:a=>{u(a.target.value);const l=R.find(y=>y.name===a.target.value)?.deps||[];b([...l])},value:i,children:R.map(a=>f(B,{value:a.name,style:{width:tt},children:f(j.Link,{href:a.repo,target:"_blank",children:a.name})},a.name))})]}),P(O,{gap:"middle",justify:"center",align:"center",children:[f(j.Title,{level:5,style:{margin:0,width:F},children:"External:"}),f(ct.Group,{value:s,onChange:a=>{p(a)},children:de.map(a=>f(ct,{value:a,style:{width:tt},children:a},a))})]})]}),f($e,{placeholder:"input script name or https://github.com/<user>/<repo>",onSearch:Wt,enterButton:!0}),f(Et,{rowSelection:{hideSelectAll:!0,type:"checkbox",onSelect:(a,l)=>{b(l?[...o,a.name]:[...o].filter(y=>y!==a.name))},getCheckboxProps:a=>({disabled:J.includes(a.name)||Pt.includes(a.name),name:a.name}),selectedRowKeys:[...o,...J]},className:"table",columns:kt,dataSource:c}),f(Mt,{spinning:r,fullscreen:!0}),P(O,{children:[f(N,{color:"processing",children:$},$),J.map((a,l)=>n[a]&&f(N,{color:"success",children:n[a]?.name},n[a]?.key+l)),s.map(a=>f(N,{color:"success",children:a},a)),o.map((a,l)=>f(N,{closable:!0,color:"success",onClose:y=>{const w=o.indexOf(n[a]?.key);if(w!==-1){const d=[...o];d.splice(w,1),b(d)}y.preventDefault()},children:n[a]?.name},n[a]?.key+l))]}),P(O,{gap:"middle",children:[f(H,{color:"danger",size:"large",variant:"solid",onClick:St,children:"Reset"}),P(H,{type:"primary",icon:f(G,{}),size:"large",onClick:Lt,children:[L,".zip"]}),f(H,{type:"primary",icon:f(G,{}),size:"large",onClick:jt,children:"portable_config.zip"})]}),!!at.length&&f(At,{description:`conflict: ${at.join(" ")}`,type:"error"})]})]})}ht(document.getElementById("root")).render(f(Pe,{}));
